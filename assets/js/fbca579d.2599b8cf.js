"use strict";(self.webpackChunkfluid_docs=self.webpackChunkfluid_docs||[]).push([[6],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},h="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=d(n),p=a,m=h["".concat(s,".").concat(p)]||h[p]||c[p]||i;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:a,o[1]=l;for(var d=2;d<i;d++)o[d]=n[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6374:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:4},o="Channel Point Rewards",l={unversionedId:"fluid-queue/channel-points",id:"fluid-queue/channel-points",title:"Channel Point Rewards",description:"This feature requires a broadcaster token with the channelredemptions and channelredemptions scopes.",source:"@site/docs/fluid-queue/channel-points.md",sourceDirName:"fluid-queue",slug:"/fluid-queue/channel-points",permalink:"/docs/next/fluid-queue/channel-points",draft:!1,editUrl:"https://github.com/fluid-queue/fluid-docs/tree/main/packages/create-docusaurus/templates/shared/docs/fluid-queue/channel-points.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Managing command aliases",permalink:"/docs/next/fluid-queue/aliases"}},s={},d=[{value:"Overview",id:"overview",level:2},{value:"Setup",id:"setup",level:2},{value:"Using the reward",id:"using-the-reward",level:2},{value:"Updating the reward",id:"updating-the-reward",level:2},{value:"Disabling the reward",id:"disabling-the-reward",level:2}],u={toc:d},h="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(h,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"channel-point-rewards"},"Channel Point Rewards"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"This feature requires a broadcaster token with the ",(0,a.kt)("inlineCode",{parentName:"p"},"channel:manage:redemptions")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"channel:read:redemptions")," scopes.")),(0,a.kt)("p",null,'fluid-queue supports creating, managing, and monitoring a "skip queue" channel point reward, which will allow a user to redeem channel points and automatically skip the queue--no manual intervention required!'),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"When you enable the skip queue feature, the bot will automatically create a channel point reward for you based on the settings you provide, and then monitor for redemptions of that reward. It will maintain an internal list of users who redeemed the reward, and (when you use ",(0,a.kt)("inlineCode",{parentName:"p"},"!level"),") insert them in between your selection commands according to your settings. There are options to limit redemptions, either through Twitch's built-in limits (a global cooldown, a per-user limit) or through a limit managed by the bot (a global limit on how many times the reward can be redeemed per stream). There is also an option to space skips one or more normal levels apart from each other, which can ensure that even as viewers redeem the reward, your viewers who didn't redeem it still get a fair chance to see their levels played."),(0,a.kt)("p",null,"Once configured through ",(0,a.kt)("inlineCode",{parentName:"p"},"settings/channel-points.yml"),", the reward will be fully managed by the bot. When the bot starts, it will check to see if the reward exists (and is owned by the bot) and create it if not. If the reward does exist, it will then check to make sure it's configured correctly, and update the settings on Twitch if it detects any changes."),(0,a.kt)("h2",{id:"setup"},"Setup"),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Don't create the reward yourself, or the bot will be unable to start! Configure the reward, and let the bot create it.")),(0,a.kt)("p",null,"First, create your ",(0,a.kt)("inlineCode",{parentName:"p"},"settings/channel-points.yml")," file. You may be able to copy the existing ",(0,a.kt)("inlineCode",{parentName:"p"},"channel-points.example.yml")," file, if you set up the bot from a packaged release."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"channel-points.example.yml"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},'---\nrewards:\n  skip_queue:\n    enabled: true           # Whether the reward should be created and monitored by the bot\n    name: "Pway My Wevel!"  # What the reward should be named\n    prompt: null            # What description (if any) the reward should have\n    cost: 10001             # How many channel points the reward should cost\n\n    global_limit: 2         # A per-stream limit, enforced by the bot, of how many times this can be redeemed.\n                            # Will reset every time the bot is started, or when the bot notices the stream go offline.\n                            # Similarly, when this limit is hit, the bot will pause the reward, and unpause it when the bot is started or notices the stream go offline.\n\n    per_user_limit: 1       # A per-user per-stream limit, enforced by Twitch.\n    global_cooldown: 180    # A global cooldown on the reward, enforced by Twitch. Specified in seconds.\nskip_spacing: 1         # How many levels should be played in between queue-skip levels.\n                        # This does not prevent redemptions. This just ensures that the specified number of non-skip levels are played in between skip levels.\n'))),(0,a.kt)("p",null,"Edit this to your liking, then start the bot as normal; the bot will create the reward and automatically start managing it for you."),(0,a.kt)("h2",{id:"using-the-reward"},"Using the reward"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The reward will only work correctly if you use the ",(0,a.kt)("inlineCode",{parentName:"p"},"!level")," command (or an alias) to select levels.")),(0,a.kt)("p",null,"The reward can only be redeemed by a viewer who has a level in the queue. When a viewer redeems the reward successfully, the bot should thank them, and you should see the reward appear in your pending rewards on Twitch. Once their level is selected, the bot will automatically mark the redemption as fulfilled. Removing a user, selecting their level directly, or the user leaving the queue themselves, will automatically remove them from the internal skip queue and refund their points. Similarly, refunding their points will also remove them from the internal skip queue."),(0,a.kt)("p",null,'If you have a per-stream limit set, whenever a reward is refunded it will be added back into the "pool" of rewards that can be redeemed; this way, we can avoid Twitch\'s longstanding issue where refunding a reward will not allow someone else to redeem it. Once the per-stream limit is reached, the bot should automatically pause the reward to prevent future redemptions (and will reject any redemptions that manage to come through anyway). If anyone is refunded after the reward is paused, it should automatically unpause as well.'),(0,a.kt)("h2",{id:"updating-the-reward"},"Updating the reward"),(0,a.kt)("p",null,"If you want to update the reward, update your configuration in ",(0,a.kt)("inlineCode",{parentName:"p"},"channel-points.yml"),". Any changes made within that file will be synced to Twitch the next time you start the bot."),(0,a.kt)("h2",{id:"disabling-the-reward"},"Disabling the reward"),(0,a.kt)("p",null,"If you want to disable the reward temporarily, you can change ",(0,a.kt)("inlineCode",{parentName:"p"},"enabled: true")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"enabled: false")," and then delete (or disable) the reward on Twitch. The bot should no longer create or manage the reward until you re-enable it from the config."),(0,a.kt)("p",null,"Similarly, to permanently disable the reward, you can delete the configuration file and then remove the reward from Twitch."))}c.isMDXComponent=!0}}]);